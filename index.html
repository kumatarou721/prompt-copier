<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="theme-color" content="#090a0f">
  <title>US Stock Analyzer - Command Center (Ver 21.1)</title>
  <link href="https://fonts.googleapis.com/css2?family=Chakra+Petch:wght@400;600;700&family=Orbitron:wght@500;700&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* --- ã‚µã‚¤ãƒãƒ¼ãƒ‘ãƒ³ã‚¯ãƒ»ãƒ†ãƒ¼ãƒè¨­å®š --- */
    :root {
      --neon-blue: #3b82f6;
      --neon-purple: #8b5cf6;
      --neon-amber: #f59e0b;
      --neon-green: #10b981;
      --neon-red: #ef4444;
      --bg-dark: #090a0f;
    }

    /* HTMLå…¨ä½“ã«èƒŒæ™¯è‰²ã‚’è¨­å®šï¼ˆãƒã‚¦ãƒ³ã‚¹ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«æ™‚ã®ç™½èƒŒæ™¯é˜²æ­¢ï¼‰ */
    html {
      background-color: var(--bg-dark);
      height: 100%;
      overflow-y: scroll; /* ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒãƒ¼ã®ã‚¬ã‚¿ã¤ãé˜²æ­¢ */
    }

    body {
      background: 
        radial-gradient(circle at 50% -20%, #2a1f62, #090a0f 60%),
        url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M54.627 0l.83.828-1.415 1.415L51.8 0h2.827zM5.373 0l-.83.828L5.96 2.243 8.2 0H5.374zM48.97 0l3.657 3.657-1.414 1.414L46.143 0h2.828zM11.03 0L7.372 3.657 8.787 5.07 13.857 0H11.03zm32.284 0L49.8 6.485 48.386 7.9 40.486 0h2.828zm-26.628 0l-6.485 6.485 1.414 1.414L17.314 0h-2.828zM31.113 0L47.8 16.686 46.386 18.1 28.286 0h2.828zm-2.226 0l-16.686 16.686 1.414 1.414L30.3 0h-2.828zM14.857 0L44.97 30.113 43.557 31.527 12.03 0h2.828zm30.286 0L15.03 30.113 16.443 31.527 47.97 0h-2.828zM0 14.857L30.113 44.97 31.527 43.557 0 12.03v2.828zm0 30.286L30.113 15.03 31.527 16.443 0 47.97v-2.828zM0 31.113L16.686 47.8 18.1 46.386 0 28.286v2.828zm0-2.226L16.686 12.2 18.1 13.614 0 31.714v-2.828zM0 5.373L5.373 0h2.828L0 8.2v-2.827zm0 49.254L54.627 60h2.828L0 51.8v2.827zm0-5.373L48.97 60h2.828L0 46.143v2.828zm0-43.88L11.03 0h2.828L0 13.857V5.374zm0 49.254L54.627 0h2.828L0 57.457v-2.83zm0-5.374L48.97 0h2.828L0 51.8v-2.827zm0-43.88L11.03 60h2.828L0 46.143V5.373zm0 49.254L43.314 0h2.828L0 46.143v2.83zm0-5.373L37.657 0h2.828L0 40.486v2.827zm0-38.514L11.03 60h2.828L0 13.857v-2.828zM0 0l60 60h-2.828L0 2.828V0zm0 60L60 0h-2.828L0 57.172V60z' fill='%232d3748' fill-opacity='0.05' fill-rule='evenodd'/%3E%3C/svg%3E");
      background-color: var(--bg-dark); /* ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ */
      background-attachment: fixed;
      background-size: auto;
      color: #e2e8f0;
      font-family: 'Chakra Petch', sans-serif;
      min-height: 100vh;
      
      /* ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒãƒ¼ã®ä¸‹ã«ä¸‹ã’ã‚‹ */
      padding-top: calc(env(safe-area-inset-top) + 24px);
      padding-bottom: calc(env(safe-area-inset-bottom) + 20px);
      
      -webkit-tap-highlight-color: transparent;
    }

    h1, h2, h4, .font-display {
      font-family: 'Orbitron', sans-serif;
      letter-spacing: 1px;
    }

    .title-gradient {
      background: linear-gradient(to right, #60a5fa, #34d399);
      -webkit-background-clip: text;
      color: transparent;
      text-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
    }

    /* --- ãƒã‚ªãƒ³ã‚°ãƒ©ã‚¹ãƒ»ãƒ‘ãƒãƒ« --- */
    .neon-glass {
      background: rgba(13, 17, 30, 0.6);
      backdrop-filter: blur(20px) saturate(150%);
      -webkit-backdrop-filter: blur(20px) saturate(150%);
      border: 1px solid rgba(255, 255, 255, 0.05);
      box-shadow: 
        0 8px 32px 0 rgba(0, 0, 0, 0.5),
        inset 0 0 0 1px rgba(255, 255, 255, 0.05);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
      overflow: hidden;
    }
    .neon-glass::before {
      content: '';
      position: absolute;
      top: 0; left: -150%;
      width: 100%; height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
      transform: skewX(-25deg);
      transition: left 0.7s ease-in-out;
      pointer-events: none;
    }
    .neon-glass:hover::before {
      left: 150%;
    }

    .loader-box {
      border: 2px dashed rgba(99, 102, 241, 0.3);
      box-shadow: 0 0 20px rgba(99, 102, 241, 0.1);
    }
    .loader-box:hover {
      border-color: var(--neon-purple);
      box-shadow: 0 0 30px rgba(139, 92, 246, 0.3);
    }

    /* --- ã‚«ãƒ¼ãƒ‰ã‚¹ã‚¿ã‚¤ãƒ« --- */
    .card-base {
      border: 1px solid;
      transition: all 0.3s ease;
    }
    .card-lt { border-color: rgba(59, 130, 246, 0.5); background: rgba(59, 130, 246, 0.05); }
    .card-lt:hover { box-shadow: 0 0 25px rgba(59, 130, 246, 0.4); border-color: var(--neon-blue); }

    .card-swing { border-color: rgba(245, 158, 11, 0.5); background: rgba(245, 158, 11, 0.05); }
    .card-swing:hover { box-shadow: 0 0 25px rgba(245, 158, 11, 0.4); border-color: var(--neon-amber); }

    .card-stat { border-color: rgba(139, 92, 246, 0.3); background: rgba(139, 92, 246, 0.05); }
    .card-stat:hover { border-color: var(--neon-purple); box-shadow: 0 0 15px rgba(139, 92, 246, 0.3); }

    .card-sector { border-color: rgba(16, 185, 129, 0.5); background: rgba(16, 185, 129, 0.05); }

    /* Ver 21.1: Portfolio & Day Trade Cards */
    .card-portfolio { border-color: rgba(139, 92, 246, 0.5); background: rgba(139, 92, 246, 0.05); }
    .card-portfolio:hover { box-shadow: 0 0 25px rgba(139, 92, 246, 0.4); border-color: var(--neon-purple); }

    .card-daytrade { border-color: rgba(239, 68, 68, 0.5); background: rgba(239, 68, 68, 0.05); }
    .card-daytrade:hover { box-shadow: 0 0 25px rgba(239, 68, 68, 0.4); border-color: var(--neon-red); }

    /* Urgency indicators */
    .urgency-urgent { color: #ef4444; text-shadow: 0 0 10px rgba(239, 68, 68, 0.8); }
    .urgency-high { color: #f59e0b; text-shadow: 0 0 10px rgba(245, 158, 11, 0.8); }
    .urgency-medium { color: #eab308; }
    .urgency-low { color: #22c55e; }

    /* VWAP/ORB status */
    .vwap-above { color: #10b981; }
    .vwap-below { color: #ef4444; }
    .orb-breakout { color: #10b981; text-shadow: 0 0 8px rgba(16, 185, 129, 0.6); }
    .gap-go { color: #10b981; }
    .gap-fill { color: #f59e0b; }

    /* --- ã‚¢ãƒ©ãƒ¼ãƒˆ --- */
    .alert-box {
      background: rgba(16, 185, 129, 0.1);
      border: 1px solid rgba(16, 185, 129, 0.6);
      box-shadow: 0 0 15px rgba(16, 185, 129, 0.2);
    }
    .pulse-border {
      animation: pulseNeon 2s infinite alternate;
    }
    @keyframes pulseNeon {
      from { box-shadow: 0 0 15px rgba(16, 185, 129, 0.2), inset 0 0 10px rgba(16, 185, 129, 0.1); }
      to { box-shadow: 0 0 30px rgba(16, 185, 129, 0.5), inset 0 0 20px rgba(16, 185, 129, 0.3); border-color: var(--neon-green); }
    }

    /* --- ãƒœã‚¿ãƒ³ --- */
    .btn-neon {
      position: relative;
      border: 1px solid transparent;
      background-clip: padding-box;
      transition: all 0.2s ease;
      text-transform: uppercase;
      letter-spacing: 1px;
      font-family: 'Orbitron', sans-serif;
      overflow: hidden;
      font-size: 0.85rem;
    }
    .btn-neon::after {
      content: '';
      position: absolute;
      top: -2px; left: -2px; right: -2px; bottom: -2px;
      z-index: -1;
      border-radius: inherit;
      background: linear-gradient(45deg, var(--btn-color-1), var(--btn-color-2));
      opacity: 0.5;
      filter: blur(5px);
      transition: opacity 0.3s ease;
    }
    .btn-neon:hover::after { opacity: 1; filter: blur(8px); }
    .btn-neon:hover { transform: translateY(-2px); }
    .btn-neon:active { transform: scale(0.98) translateY(0); }
    .btn-neon:disabled { opacity: 0.4; cursor: not-allowed; transform: none; }
    .btn-neon:disabled::after { opacity: 0.2; filter: blur(2px); }

    .btn-pf { --btn-color-1: #8B5CF6; --btn-color-2: #6366F1; background: linear-gradient(135deg, #8B5CF6cc, #6366F1cc); }
    .btn-long { --btn-color-1: #10B981; --btn-color-2: #059669; background: linear-gradient(135deg, #10B981cc, #059669cc); }
    .btn-swing { --btn-color-1: #F59E0B; --btn-color-2: #D97706; background: linear-gradient(135deg, #F59E0Bcc, #D97706cc); }
    .btn-day { --btn-color-1: #EF4444; --btn-color-2: #DC2626; background: linear-gradient(135deg, #EF4444cc, #DC2626cc); }
    .btn-tr { --btn-color-1: #6366F1; --btn-color-2: #4F46E5; background: linear-gradient(135deg, #6366F1cc, #4F46E5cc); }

    /* --- å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ --- */
    .cyber-input {
      background: rgba(15, 23, 42, 0.8) !important;
      border: 1px solid rgba(99, 102, 241, 0.3) !important;
      color: #a5b4fc !important;
      font-family: 'Chakra Petch', sans-serif;
      letter-spacing: 1px;
      transition: all 0.3s ease;
    }
    .cyber-input:focus {
      border-color: var(--neon-purple) !important;
      box-shadow: 0 0 15px rgba(139, 92, 246, 0.3) !important;
    }

    .text-glow-blue { text-shadow: 0 0 10px rgba(59, 130, 246, 0.8); }
    .text-glow-amber { text-shadow: 0 0 10px rgba(245, 158, 11, 0.8); }
    .text-glow-green { text-shadow: 0 0 10px rgba(16, 185, 129, 0.8); }
    .text-xxs { font-size: 0.65rem; }
    .fade-in { animation: fadeIn 0.5s cubic-bezier(0.4, 0, 0.2, 1); }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
    input[type="number"]::-webkit-inner-spin-button, 
    input[type="number"]::-webkit-outer-spin-button { -webkit-appearance: none; margin: 0; }
  </style>
</head>
<body class="p-4 max-w-md mx-auto">

  <div id="loader-screen" class="flex flex-col items-center justify-center min-h-[80vh] fade-in">
    <div class="text-center mb-10">
      <h1 class="text-3xl font-bold title-gradient mb-2">
        US Stock Analyzer
      </h1>
      <p class="text-slate-400 text-sm font-display tracking-widest">/// Mobile Command Center ///</p>
    </div>

    <label class="w-full neon-glass loader-box rounded-xl p-8 flex flex-col items-center justify-center gap-5 cursor-pointer transition-all group">
      <div class="w-16 h-16 rounded-full bg-slate-800/50 border border-indigo-500/30 flex items-center justify-center text-3xl group-hover:border-indigo-400 group-hover:shadow-[0_0_20px_rgba(99,102,241,0.4)] transition-all">ğŸ“‚</div>
      <div class="text-center">
        <span class="block font-bold text-indigo-300 text-lg font-display group-hover:text-indigo-200">Load Data Module</span>
        <span class="text-xs text-slate-500 mt-2 block font-display">SELECT MOBILE_PROMPTS.JSON</span>
      </div>
      <input type="file" id="file-input" accept=".json" class="hidden">
    </label>
    
    <div class="mt-8 text-xs text-slate-600 text-center max-w-xs font-mono">
      [SYSTEM]: Awaiting output from us-stock-analyzer.ipynb (Cell 9)
    </div>
  </div>

  <div id="dashboard" class="hidden fade-in pb-20">
    
    <div class="text-center mb-6">
      <div class="flex items-center justify-center gap-2 mb-1">
        <h2 class="text-xl font-bold text-white text-glow-blue">Analysis Report</h2>
      </div>
      <div id="gen-date" class="text-xs text-slate-400 font-mono leading-relaxed bg-slate-900/50 inline-block px-3 py-1.5 rounded border border-slate-700/50">
        Generated: --
      </div>
    </div>

    <div class="grid grid-cols-2 gap-4 mb-4">
      <div class="neon-glass card-base card-lt rounded-xl p-4 text-center relative">
        <h4 class="text-blue-400 text-xs font-bold mb-2 uppercase tracking-wider">ğŸš€ Long-Term</h4>
        <div id="lt-signal-count" class="text-3xl font-bold text-blue-400 text-glow-blue">--</div>
        <div class="text-xs text-slate-400 mt-2 font-mono">
          W:<span id="lt-watch" class="text-slate-200">--</span> <span class="text-slate-600">|</span> R:<span id="lt-ready" class="text-slate-200">--</span>
        </div>
      </div>
      <div class="neon-glass card-base card-swing rounded-xl p-4 text-center relative">
        <h4 class="text-amber-400 text-xs font-bold mb-2 uppercase tracking-wider">ğŸ„ Swing</h4>
        <div id="swing-signal-count" class="text-3xl font-bold text-amber-400 text-glow-amber">--</div>
        <div class="text-xs text-slate-400 mt-2 font-mono">
          W:<span id="swing-watch" class="text-slate-200">--</span> <span class="text-slate-600">|</span> R:<span id="swing-ready" class="text-slate-200">--</span>
        </div>
      </div>
    </div>

    <div class="grid grid-cols-3 gap-3 mb-4">
      <div class="neon-glass card-base card-stat rounded-lg p-3 text-center">
        <div class="text-xxs text-violet-300 uppercase font-display">Total</div>
        <div id="stat-total" class="font-bold text-violet-100 text-lg">--</div>
      </div>
      <div class="neon-glass card-base card-stat rounded-lg p-3 text-center">
        <div class="text-xxs text-violet-300 uppercase font-display">Watch</div>
        <div id="stat-watch" class="font-bold text-violet-100 text-lg">--</div>
      </div>
      <div class="neon-glass card-base card-stat rounded-lg p-3 text-center">
        <div class="text-xxs text-violet-300 uppercase font-display">Charts</div>
        <div id="stat-charts" class="font-bold text-violet-100 text-lg">--</div>
      </div>
    </div>

    <div id="sector-bar" class="neon-glass card-base card-sector rounded-xl p-3 mb-4 text-center hidden">
      <div class="text-emerald-400 text-xs font-bold mb-1 uppercase tracking-wider">ğŸ”„ Sector Rotation</div>
      <div id="sector-text" class="text-xs text-slate-200 truncate font-mono"></div>
    </div>

    <div id="signal-alert" class="neon-glass alert-box rounded-xl p-4 mb-6 text-center hidden">
      <span id="signal-alert-text" class="text-emerald-400 font-bold text-sm font-display tracking-wide"></span>
    </div>

    <!-- Ver 21.1: Portfolio Review Section -->
    <div id="portfolio-section" class="neon-glass card-base card-portfolio rounded-xl p-4 mb-4 hidden">
      <div class="flex items-center justify-between mb-3">
        <h4 class="text-violet-400 text-xs font-bold uppercase tracking-wider">ğŸ’¼ Portfolio Review</h4>
        <span id="portfolio-health" class="text-xs font-mono text-slate-400">Health: --</span>
      </div>

      <!-- Sell Signals -->
      <div id="sell-signals-container" class="mb-3 hidden">
        <div class="text-xxs text-red-400 uppercase mb-1 font-display">ğŸš¨ Sell Signals</div>
        <div id="sell-signals-list" class="space-y-1 text-xs"></div>
      </div>

      <!-- Add-on Candidates -->
      <div id="addon-signals-container" class="hidden">
        <div class="text-xxs text-emerald-400 uppercase mb-1 font-display">ğŸ“ˆ Add-on Candidates</div>
        <div id="addon-signals-list" class="space-y-1 text-xs"></div>
      </div>
    </div>

    <!-- Ver 21.1: Day Trade Section -->
    <div id="daytrade-section" class="neon-glass card-base card-daytrade rounded-xl p-4 mb-4 hidden">
      <div class="flex items-center justify-between mb-3">
        <h4 class="text-red-400 text-xs font-bold uppercase tracking-wider">ğŸï¸ Day Trade</h4>
        <span id="market-hours" class="text-xs font-mono text-slate-400">Market: --</span>
      </div>

      <div class="grid grid-cols-3 gap-2 text-center">
        <!-- VWAP Status -->
        <div class="bg-slate-900/50 rounded-lg p-2">
          <div class="text-xxs text-slate-500 uppercase font-display">VWAP</div>
          <div id="vwap-status" class="text-sm font-bold font-mono mt-1">--</div>
        </div>

        <!-- ORB Status -->
        <div class="bg-slate-900/50 rounded-lg p-2">
          <div class="text-xxs text-slate-500 uppercase font-display">ORB</div>
          <div id="orb-status" class="text-sm font-bold font-mono mt-1">--</div>
        </div>

        <!-- Gap Status -->
        <div class="bg-slate-900/50 rounded-lg p-2">
          <div class="text-xxs text-slate-500 uppercase font-display">GAP</div>
          <div id="gap-status" class="text-sm font-bold font-mono mt-1">--</div>
        </div>
      </div>

      <!-- Day Trade Candidates -->
      <div id="daytrade-candidates" class="mt-3 hidden">
        <div class="text-xxs text-slate-400 uppercase mb-1 font-display">Top Momentum</div>
        <div id="daytrade-list" class="space-y-1 text-xs"></div>
      </div>
    </div>

    <div class="mb-6">
      <div class="flex items-center gap-3 mb-4 text-slate-400">
        <div class="h-px bg-slate-700/50 flex-1 box-shadow-[0_0_10px_rgba(99,102,241,0.5)]"></div>
        <span class="text-xs font-bold uppercase tracking-widest font-display text-indigo-300">ğŸ“‹ Command Prompts</span>
        <div class="h-px bg-slate-700/50 flex-1"></div>
      </div>

      <div class="grid grid-cols-2 gap-3">
        <button onclick="copyPrompt('pf')" id="btn-pf" class="btn-neon btn-pf p-4 rounded-xl text-white font-bold shadow-lg flex justify-center items-center gap-2">
          <span>ğŸ’¼</span> Portfolio
        </button>

        <button onclick="copyPrompt('short')" id="btn-day" class="btn-neon btn-day p-4 rounded-xl text-white font-bold shadow-lg flex justify-center items-center gap-2">
          <span>ğŸï¸</span> Day
        </button>
      </div>

      <!-- Ver 21.0: 2-Phase Long Term Prompts -->
      <div class="mt-3">
        <div class="text-[10px] text-slate-500 uppercase tracking-wider mb-2 text-center font-display">ğŸš€ Long-Term (2-Phase)</div>
        <div class="grid grid-cols-2 gap-3">
          <button onclick="copyPrompt('long_p1')" id="btn-long-p1" class="btn-neon btn-long p-3 rounded-xl text-white font-bold shadow-lg flex justify-center items-center gap-2 text-sm">
            <span>1ï¸âƒ£</span> LT Phase1
            <span id="badge-long" class="hidden text-[9px] bg-black/40 px-1.5 py-0.5 rounded-sm ml-1 font-mono border border-emerald-400/30"></span>
          </button>
          <button onclick="copyPrompt('long_p2')" id="btn-long-p2" class="btn-neon btn-long p-3 rounded-xl text-white font-bold shadow-lg flex justify-center items-center gap-2 text-sm">
            <span>2ï¸âƒ£</span> LT Phase2
          </button>
        </div>
      </div>

      <!-- Ver 21.0: 2-Phase Swing Prompts -->
      <div class="mt-3">
        <div class="text-[10px] text-slate-500 uppercase tracking-wider mb-2 text-center font-display">ğŸ„ Swing (2-Phase)</div>
        <div class="grid grid-cols-2 gap-3">
          <button onclick="copyPrompt('swing_p1')" id="btn-swing-p1" class="btn-neon btn-swing p-3 rounded-xl text-white font-bold shadow-lg flex justify-center items-center gap-2 text-sm">
            <span>1ï¸âƒ£</span> SW Phase1
            <span id="badge-swing" class="hidden text-[9px] bg-black/40 px-1.5 py-0.5 rounded-sm ml-1 font-mono border border-amber-400/30"></span>
          </button>
          <button onclick="copyPrompt('swing_p2')" id="btn-swing-p2" class="btn-neon btn-swing p-3 rounded-xl text-white font-bold shadow-lg flex justify-center items-center gap-2 text-sm">
            <span>2ï¸âƒ£</span> SW Phase2
          </button>
        </div>
      </div>

      <!-- Ver 21.0: Summary Prompts -->
      <div class="mt-3">
        <div class="text-[10px] text-slate-500 uppercase tracking-wider mb-2 text-center font-display">ğŸ“‹ Summary (for Cross-Val)</div>
        <div class="grid grid-cols-2 gap-3">
          <button onclick="copyPrompt('lt_summary')" id="btn-lt-summary" class="btn-neon btn-long p-3 rounded-xl text-white font-bold shadow-lg flex justify-center items-center gap-2 text-sm">
            <span>ğŸ“‹</span> LT Summary
          </button>
          <button onclick="copyPrompt('swing_summary')" id="btn-swing-summary" class="btn-neon btn-swing p-3 rounded-xl text-white font-bold shadow-lg flex justify-center items-center gap-2 text-sm">
            <span>ğŸ“‹</span> SW Summary
          </button>
        </div>
      </div>

      <div class="grid grid-cols-1 gap-3 mt-3">
        <button onclick="copyPrompt('translate')" class="btn-neon btn-tr p-4 rounded-xl text-white font-bold shadow-lg flex justify-center items-center gap-2">
          <span>ğŸ‡¯ğŸ‡µ</span> Translate
        </button>
      </div>
    </div>

    <!-- Ver 21.0: Cross-Validation Generator -->
    <div class="neon-glass rounded-xl p-5 mb-6 border-t border-slate-700/30">
      <div class="flex items-center gap-3 mb-4">
        <h4 class="text-xs font-bold text-cyan-300 uppercase tracking-widest font-display">ğŸ”¬ Cross-Validation Generator</h4>
        <button onclick="toggleCrossVal()" id="crossval-toggle" class="text-xs text-slate-500 hover:text-cyan-400 ml-auto">
          [EXPAND]
        </button>
      </div>

      <div id="crossval-panel" class="hidden">
        <div class="text-[10px] text-slate-500 mb-2">Gemini Summary (C1):</div>
        <textarea id="gemini-summary" rows="4" placeholder="Gemini ã® Summary å›ç­”ã‚’è²¼ã‚Šä»˜ã‘..." class="cyber-input w-full rounded-lg px-3 py-2 text-xs mb-3 resize-none"></textarea>

        <div class="text-[10px] text-slate-500 mb-2">Claude Summary (C2):</div>
        <textarea id="claude-summary" rows="4" placeholder="Claude ã® Summary å›ç­”ã‚’è²¼ã‚Šä»˜ã‘..." class="cyber-input w-full rounded-lg px-3 py-2 text-xs mb-3 resize-none"></textarea>

        <div class="grid grid-cols-2 gap-3">
          <button onclick="generateCrossVal('lt')" class="btn-neon btn-long p-3 rounded-xl text-white font-bold shadow-lg flex justify-center items-center gap-2 text-sm">
            <span>ğŸ”¬</span> LT Cross-Val
          </button>
          <button onclick="generateCrossVal('swing')" class="btn-neon btn-swing p-3 rounded-xl text-white font-bold shadow-lg flex justify-center items-center gap-2 text-sm">
            <span>ğŸ”¬</span> SW Cross-Val
          </button>
        </div>

        <div class="text-[10px] text-slate-600 mt-3 text-center">
          ç”Ÿæˆã•ã‚ŒãŸãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã¯è‡ªå‹•ã§ã‚³ãƒ”ãƒ¼ã•ã‚Œã¾ã™
        </div>
      </div>
    </div>

    <div class="neon-glass rounded-xl p-5 border-t border-slate-700/30">
      <h4 class="text-xs font-bold text-indigo-300 mb-4 uppercase tracking-widest font-display">ğŸ§® Position Calculator</h4>
      <div class="grid grid-cols-2 gap-3 mb-4">
        <input type="number" id="calc-eq" placeholder="Total $" value="10000" class="cyber-input rounded-lg px-3 py-2.5 text-sm outline-none">
        <input type="number" id="calc-risk" placeholder="Risk %" value="1" class="cyber-input rounded-lg px-3 py-2.5 text-sm outline-none">
        <input type="number" id="calc-entry" placeholder="Entry Price" class="cyber-input rounded-lg px-3 py-2.5 text-sm outline-none">
        <input type="number" id="calc-stop" placeholder="Stop Price" class="cyber-input rounded-lg px-3 py-2.5 text-sm outline-none">
      </div>
      
      <div class="bg-slate-900/60 rounded-lg p-4 grid grid-cols-3 gap-2 text-center border border-slate-700/50">
        <div>
          <div class="text-xxs text-slate-500 font-display uppercase">Risk Amt</div>
          <div id="res-risk" class="text-sm font-bold text-slate-300 font-mono mt-1">$0</div>
        </div>
        <div class="border-l border-slate-700/50 relative">
           <div class="absolute inset-y-0 left-0 w-px bg-gradient-to-b from-transparent via-indigo-500/50 to-transparent"></div>
          <div class="text-xxs text-slate-500 font-display uppercase">Shares</div>
          <div id="res-shares" class="text-lg font-bold text-blue-400 text-glow-blue font-mono mt-1">---</div>
        </div>
        <div class="border-l border-slate-700/50 relative">
          <div class="absolute inset-y-0 left-0 w-px bg-gradient-to-b from-transparent via-emerald-500/50 to-transparent"></div>
          <div class="text-xxs text-slate-500 font-display uppercase">Position</div>
          <div id="res-cost" class="text-sm font-bold text-emerald-400 font-mono mt-1">$0</div>
        </div>
      </div>
    </div>

    <div class="text-center mt-10">
      <button onclick="location.reload()" class="text-xs text-slate-500 hover:text-indigo-400 underline font-display tracking-wider transition-colors">
        [SYSTEM]: TERMINATE & RELOAD
      </button>
    </div>

  </div>

  <div id="toast" class="fixed bottom-8 left-1/2 -translate-x-1/2 bg-slate-900/90 text-emerald-400 px-6 py-3 rounded-full shadow-[0_0_20px_rgba(16,185,129,0.3)] border border-emerald-500/30 text-sm font-bold opacity-0 transition-all pointer-events-none flex items-center gap-3 z-50 backdrop-blur-md font-display">
    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" class="drop-shadow-[0_0_5px_rgba(16,185,129,0.8)]"><polyline points="20 6 9 17 4 12"/></svg>
    <span id="toast-msg" class="tracking-wider">COPIED!</span>
  </div>

  <script>
    let appData = null;

    // File Input Logic (Enhanced)
    const fileInput = document.getElementById('file-input');
    
    // Allow re-selecting the same file by resetting value on click
    fileInput.addEventListener('click', function(e) {
      e.target.value = '';
    });

    fileInput.addEventListener('change', function(e) {
      const file = e.target.files[0];
      if (!file) return;

      const reader = new FileReader();
      reader.onload = function(e) {
        try {
          // --- JSON Sanitization (NaN/Infinity handling) ---
          let jsonStr = e.target.result;
          jsonStr = jsonStr.replace(/:\s*NaN\b/g, ': null');
          jsonStr = jsonStr.replace(/:\s*Infinity\b/g, ': null');
          jsonStr = jsonStr.replace(/:\s*-Infinity\b/g, ': null');
          // ------------------------

          appData = JSON.parse(jsonStr);
          renderDashboard(appData);
        } catch (error) {
          console.error(error);
          alert("Invalid JSON file.\nError: " + error.message);
        }
      };
      reader.readAsText(file);
    });

    function renderDashboard(data) {
      document.getElementById('loader-screen').classList.add('hidden');
      document.getElementById('dashboard').classList.remove('hidden');

      // 1. Metadata & Date
      const meta = data.metadata || {};
      const formattedDate = formatDualTime(meta.generated_at);
      document.getElementById('gen-date').innerHTML = formattedDate;

      // 2. Signals & Watchlists Stats
      const signals = data.signals || {};
      const watchlists = data.watchlists || {};
      
      const ltCount = (signals.long_term || []).length;
      const swingCount = (signals.swing || []).length;
      
      const ltW = watchlists.long_term?.watching || 0;
      const ltR = watchlists.long_term?.ready || 0;
      const swW = watchlists.swing?.watching || 0;
      const swR = watchlists.swing?.ready || 0;

      updateStat('lt-signal-count', ltCount, ltCount > 0);
      updateStat('swing-signal-count', swingCount, swingCount > 0);
      document.getElementById('lt-watch').textContent = ltW;
      document.getElementById('lt-ready').textContent = ltR;
      document.getElementById('swing-watch').textContent = swW;
      document.getElementById('swing-ready').textContent = swR;

      // 3. Stats Row
      const chartCount = Object.values(data.charts || {}).flat().length;
      document.getElementById('stat-total').textContent = ltCount + swingCount;
      document.getElementById('stat-watch').textContent = ltW + swW + ltR + swR;
      document.getElementById('stat-charts').textContent = chartCount;

      // 4. Sector Info (Corrected Logic)
      const sectors = data.sector_rotation || {};
      // Ensure we safely access the arrays
      const topS = (sectors.top_sectors || []).map(s => s.sector).slice(0, 3).join(', ');
      const botS = (sectors.bottom_sectors || []).map(s => s.sector).slice(0, 2).join(', ');
      
      if (topS) {
        const sectorEl = document.getElementById('sector-bar');
        sectorEl.classList.remove('hidden');
        document.getElementById('sector-text').innerHTML = `<span class="text-emerald-300">ğŸŸ¢ ${topS}</span> <span class="text-slate-500 mx-2">|</span> <span class="text-red-300">ğŸ”´ ${botS}</span>`;
      }

      // 5. Signal Alert
      const totalSignals = ltCount + swingCount;
      const alertEl = document.getElementById('signal-alert');
      const alertText = document.getElementById('signal-alert-text');
      
      alertEl.classList.remove('hidden');
      if (totalSignals > 0) {
        alertEl.classList.add('pulse-border');
        alertText.innerHTML = `âš¡ ${totalSignals} SIGNALS DETECTED`;
        alertText.className = "text-emerald-400 font-bold text-sm font-display tracking-wide text-glow-green";
      } else {
        alertEl.classList.remove('pulse-border');
        alertEl.style.borderColor = "rgba(148, 163, 184, 0.2)";
        alertEl.style.background = "rgba(148, 163, 184, 0.05)";
        alertText.textContent = "ğŸ“Š NO NEW SIGNALS TODAY";
        alertText.className = "text-slate-400 text-sm font-display tracking-wide";
      }

      // 6. Portfolio Review (Ver 21.1)
      renderPortfolioSection(data.portfolio || {});

      // 7. Day Trade Section (Ver 21.1)
      renderDayTradeSection(data.day_trade || {});

      // 8. Buttons & Badges
      const avail = data.availability || {};
      toggleBtn('btn-pf', avail.pf);
      toggleBtn('btn-day', avail.short);

      // Ver 21.0: 2-Phase buttons
      toggleBtn('btn-long-p1', avail.long_p1 || avail.long);
      toggleBtn('btn-long-p2', avail.long_p2 || avail.long);
      toggleBtn('btn-swing-p1', avail.swing_p1 || avail.swing);
      toggleBtn('btn-swing-p2', avail.swing_p2 || avail.swing);

      // Ver 21.0: Summary buttons
      toggleBtn('btn-lt-summary', avail.lt_summary || avail.long);
      toggleBtn('btn-swing-summary', avail.swing_summary || avail.swing);

      if (ltCount > 0) showBadge('badge-long', `${ltCount}âš¡`);
      if (swingCount > 0) showBadge('badge-swing', `${swingCount}âš¡`);
    }

    // Date Format (US/JP)
    function formatDualTime(isoString) {
      if (!isoString) return 'Unknown';
      try {
        const date = new Date(isoString);
        if (isNaN(date.getTime())) return isoString;

        const fmt = (tz) => new Intl.DateTimeFormat('ja-JP', {
          month: '2-digit', day: '2-digit',
          hour: '2-digit', minute: '2-digit', second: '2-digit',
          hour12: false,
          timeZone: tz
        }).format(date);

        return `ğŸ‡ºğŸ‡¸ ${fmt('America/New_York')}<span class="mx-2 opacity-50">|</span>ğŸ‡¯ğŸ‡µ ${fmt('Asia/Tokyo')}`;
      } catch (e) {
        return isoString;
      }
    }

    function updateStat(id, value, highlight) {
      const el = document.getElementById(id);
      el.textContent = value;
      if (highlight) {
        el.classList.add(id.includes('lt') ? 'text-glow-blue' : 'text-glow-amber');
        el.style.opacity = '1';
      } else {
        el.classList.remove('text-glow-blue', 'text-glow-amber');
        el.style.opacity = '0.5';
      }
    }

    function toggleBtn(id, enable) {
      const btn = document.getElementById(id);
      btn.disabled = !enable;
    }

    function showBadge(id, text) {
      const el = document.getElementById(id);
      el.textContent = text;
      el.classList.remove('hidden');
    }

    // --- Calculator Logic (Safe) ---
    const calcInputs = ['calc-eq', 'calc-risk', 'calc-entry', 'calc-stop'];
    calcInputs.forEach(id => {
      document.getElementById(id).addEventListener('input', calculatePosition);
    });

    function calculatePosition() {
      const eq = parseFloat(document.getElementById('calc-eq').value) || 0;
      const risk = parseFloat(document.getElementById('calc-risk').value) || 0;
      const entry = parseFloat(document.getElementById('calc-entry').value) || 0;
      const stop = parseFloat(document.getElementById('calc-stop').value) || 0;

      const riskAmt = eq * (risk / 100);
      document.getElementById('res-risk').textContent = '$' + Math.floor(riskAmt);

      if (entry > 0 && stop > 0 && entry > stop) {
        const riskPerShare = entry - stop;
        const shares = Math.floor(riskAmt / riskPerShare);
        
        // Safety check for infinity/NaN
        if (!isFinite(shares) || shares < 0) {
             document.getElementById('res-shares').textContent = '---';
             document.getElementById('res-cost').textContent = '$0';
             return;
        }

        const cost = shares * entry;
        
        document.getElementById('res-shares').textContent = shares.toLocaleString();
        document.getElementById('res-cost').textContent = '$' + (Math.toLocaleString ? cost.toLocaleString() : cost);
        document.getElementById('res-shares').classList.add('text-glow-blue');
      } else {
        document.getElementById('res-shares').textContent = '---';
        document.getElementById('res-cost').textContent = '$0';
        document.getElementById('res-shares').classList.remove('text-glow-blue');
      }
    }

    // --- Copy Logic ---
    async function copyPrompt(key) {
      if (!appData || !appData.prompts) return;
      const text = appData.prompts[key];
      if (!text) return;

      try {
        await navigator.clipboard.writeText(text);
        showToast(`âœ… ${key.toUpperCase()} COPIED`);
      } catch (err) {
        const textArea = document.createElement("textarea");
        textArea.value = text;
        textArea.style.position = "fixed";
        document.body.appendChild(textArea);
        textArea.focus();
        textArea.select();
        try {
          document.execCommand('copy');
          showToast(`âœ… ${key.toUpperCase()} COPIED`);
        } catch (e) {
          showToast("âŒ COPY FAILED");
        }
        document.body.removeChild(textArea);
      }
    }

    function showToast(msg) {
      const t = document.getElementById('toast');
      const tm = document.getElementById('toast-msg');
      tm.textContent = msg;
      t.style.opacity = '1';
      t.style.transform = 'translate(-50%, -20px) scale(1)';
      setTimeout(() => {
        t.style.opacity = '0';
        t.style.transform = 'translate(-50%, 0) scale(0.95)';
      }, 2000);
    }

    // --- Ver 21.1: Portfolio Review Section ---
    function renderPortfolioSection(portfolio) {
      const section = document.getElementById('portfolio-section');
      const sellSignals = portfolio.sell_signals || [];
      const addonSignals = portfolio.addon_signals || [];
      const avgHealth = portfolio.avg_health_score;

      // Show section if any data exists
      if (sellSignals.length > 0 || addonSignals.length > 0 || avgHealth) {
        section.classList.remove('hidden');
      } else {
        return;
      }

      // Health Score
      if (avgHealth !== undefined) {
        const healthEl = document.getElementById('portfolio-health');
        healthEl.textContent = `Health: ${avgHealth.toFixed(0)}%`;
        if (avgHealth >= 70) {
          healthEl.classList.add('text-emerald-400');
        } else if (avgHealth >= 50) {
          healthEl.classList.add('text-amber-400');
        } else {
          healthEl.classList.add('text-red-400');
        }
      }

      // Sell Signals
      if (sellSignals.length > 0) {
        const container = document.getElementById('sell-signals-container');
        const list = document.getElementById('sell-signals-list');
        container.classList.remove('hidden');

        list.innerHTML = sellSignals.map(sig => {
          const urgencyClass = `urgency-${sig.urgency?.toLowerCase() || 'low'}`;
          const reasons = sig.reasons ? sig.reasons.slice(0, 2).join(', ') : '';
          return `<div class="flex justify-between items-center bg-red-900/20 rounded px-2 py-1">
            <span class="font-mono font-bold ${urgencyClass}">${sig.ticker}</span>
            <span class="text-slate-400 truncate ml-2" style="max-width: 60%">${reasons}</span>
            <span class="text-xxs ${urgencyClass}">${sig.urgency || ''}</span>
          </div>`;
        }).join('');
      }

      // Add-on Signals
      if (addonSignals.length > 0) {
        const container = document.getElementById('addon-signals-container');
        const list = document.getElementById('addon-signals-list');
        container.classList.remove('hidden');

        list.innerHTML = addonSignals.map(sig => {
          const pattern = sig.pattern || sig.signal_type || '';
          return `<div class="flex justify-between items-center bg-emerald-900/20 rounded px-2 py-1">
            <span class="font-mono font-bold text-emerald-400">${sig.ticker}</span>
            <span class="text-slate-400">${pattern}</span>
          </div>`;
        }).join('');
      }
    }

    // --- Ver 21.1: Day Trade Section ---
    function renderDayTradeSection(dayTrade) {
      const section = document.getElementById('daytrade-section');
      const vwapData = dayTrade.vwap || {};
      const orbData = dayTrade.orb || {};
      const gapData = dayTrade.gap || {};
      const candidates = dayTrade.candidates || [];
      const marketStatus = dayTrade.market_status;

      // Show section if any data exists
      if (Object.keys(vwapData).length > 0 || Object.keys(orbData).length > 0 || candidates.length > 0) {
        section.classList.remove('hidden');
      } else {
        return;
      }

      // Market Hours Status
      if (marketStatus) {
        const marketEl = document.getElementById('market-hours');
        if (marketStatus === 'open') {
          marketEl.innerHTML = '<span class="text-emerald-400">â— LIVE</span>';
        } else if (marketStatus === 'pre') {
          marketEl.innerHTML = '<span class="text-amber-400">â— PRE</span>';
        } else if (marketStatus === 'after') {
          marketEl.innerHTML = '<span class="text-violet-400">â— AH</span>';
        } else {
          marketEl.innerHTML = '<span class="text-slate-500">â—‹ CLOSED</span>';
        }
      }

      // VWAP Status
      if (vwapData.trend) {
        const vwapEl = document.getElementById('vwap-status');
        const isAbove = vwapData.trend === 'above';
        vwapEl.textContent = isAbove ? 'â–² ABOVE' : 'â–¼ BELOW';
        vwapEl.className = `text-sm font-bold font-mono mt-1 ${isAbove ? 'vwap-above' : 'vwap-below'}`;
      }

      // ORB Status
      if (orbData.status) {
        const orbEl = document.getElementById('orb-status');
        if (orbData.status === 'breakout') {
          orbEl.textContent = 'â†‘ BREAK';
          orbEl.className = 'text-sm font-bold font-mono mt-1 orb-breakout';
        } else if (orbData.status === 'breakdown') {
          orbEl.textContent = 'â†“ BREAK';
          orbEl.className = 'text-sm font-bold font-mono mt-1 text-red-400';
        } else {
          orbEl.textContent = 'â†” RANGE';
          orbEl.className = 'text-sm font-bold font-mono mt-1 text-slate-400';
        }
      }

      // Gap Status
      if (gapData.classification) {
        const gapEl = document.getElementById('gap-status');
        if (gapData.classification === 'gap_and_go') {
          gapEl.textContent = 'ğŸš€ GO';
          gapEl.className = 'text-sm font-bold font-mono mt-1 gap-go';
        } else if (gapData.classification === 'gap_fill') {
          gapEl.textContent = 'â†© FILL';
          gapEl.className = 'text-sm font-bold font-mono mt-1 gap-fill';
        } else {
          gapEl.textContent = '-- N/A';
          gapEl.className = 'text-sm font-bold font-mono mt-1 text-slate-500';
        }
      }

      // Day Trade Candidates
      if (candidates.length > 0) {
        const container = document.getElementById('daytrade-candidates');
        const list = document.getElementById('daytrade-list');
        container.classList.remove('hidden');

        list.innerHTML = candidates.slice(0, 5).map(c => {
          const score = c.momentum_score || c.score || 0;
          const scoreColor = score >= 70 ? 'text-emerald-400' : score >= 50 ? 'text-amber-400' : 'text-slate-400';
          return `<div class="flex justify-between items-center bg-slate-900/50 rounded px-2 py-1">
            <span class="font-mono font-bold text-red-300">${c.ticker}</span>
            <span class="text-slate-400 text-xxs">${c.signal || c.pattern || ''}</span>
            <span class="${scoreColor} font-mono">${score.toFixed(0)}</span>
          </div>`;
        }).join('');
      }
    }

    // --- Cross-Validation Generator ---
    function toggleCrossVal() {
      const panel = document.getElementById('crossval-panel');
      const toggle = document.getElementById('crossval-toggle');
      if (panel.classList.contains('hidden')) {
        panel.classList.remove('hidden');
        toggle.textContent = '[COLLAPSE]';
      } else {
        panel.classList.add('hidden');
        toggle.textContent = '[EXPAND]';
      }
    }

    function generateCrossVal(type) {
      const geminiSummary = document.getElementById('gemini-summary').value.trim();
      const claudeSummary = document.getElementById('claude-summary').value.trim();

      if (!geminiSummary || !claudeSummary) {
        showToast('âŒ ä¸¡æ–¹ã®Summaryã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
        return;
      }

      const typeName = type === 'lt' ? 'Long-Term' : 'Swing';
      const date = appData?.metadata?.date || new Date().toISOString().split('T')[0];
      const regime = 'NEUTRAL'; // Default

      const prompt = `# ğŸ”¬ Cross-Validation: ${typeName} Final Verdict
Date: ${date} | Market: ${regime}

---

## âš ï¸ CRITICAL: Devil's Advocate Constraint (Ver 21.1)

**æ„è¦‹ãŒåˆ†ã‹ã‚ŒãŸå ´åˆã¯ã€å¿…ãšä¿å®ˆçš„ãªåˆ¤æ–­ï¼ˆPASSï¼‰ã‚’æ¡ç”¨ã™ã‚‹ã“ã¨ã€‚**

ç†ç”±: æŠ•è³‡ã«ãŠã„ã¦False Positiveï¼ˆèª¤ã‚¨ãƒ³ãƒˆãƒªãƒ¼ï¼‰ã¯False Negativeï¼ˆæ©Ÿä¼šæå¤±ï¼‰ã‚ˆã‚Šæå¤±ãŒå¤§ãã„ã€‚
**"When in doubt, PASS."**

---

## ğŸ“Š Analyst A (Gemini) Summary

\`\`\`
${geminiSummary}
\`\`\`

---

## ğŸ“Š Analyst B (Claude) Summary

\`\`\`
${claudeSummary}
\`\`\`

---

## ğŸ¯ Your Task: Cross-Validation Analysis

ä¸Šè¨˜2ã¤ã®AIåˆ†æã‚’æ¯”è¼ƒã—ã€æœ€çµ‚åˆ¤æ–­ã‚’ä¸‹ã—ã¦ãã ã•ã„ã€‚

### 1. Consensus (ä¸€è‡´ç‚¹)

ä¸¡è€…ãŒåŒæ„ã—ã¦ã„ã‚‹åˆ¤æ–­ã‚’åˆ—æŒ™:

| Ticker | Action | ä¸€è‡´ç†ç”± |
|--------|--------|----------|

### 2. Divergence (ç›¸é•ç‚¹) âš ï¸

æ„è¦‹ãŒåˆ†ã‹ã‚ŒãŸç‚¹ã¨ã€ã©ã¡ã‚‰ãŒå¦¥å½“ã‹ã‚’åˆ¤æ–­:

**âš ï¸ åˆ¤æ–­ãŒåˆ†ã‹ã‚ŒãŸå ´åˆ â†’ PASSã‚’é¸æŠ**

| Ticker | Gemini | Claude | æ¡ç”¨åˆ¤æ–­ | ç†ç”± |
|--------|--------|--------|----------|------|

### 3. Blind Spots (è¦‹è½ã¨ã—)

ä¸€æ–¹ã®ã¿ãŒæŒ‡æ‘˜ã—ãŸé‡è¦äº‹é …:

- **Geminiã®ã¿**:
- **Claudeã®ã¿**:

### 4. Final Verdict (æœ€çµ‚åˆ¤æ–­)

âš ï¸ **Devil's Advocateç¢ºèª**: ç›¸é•ç‚¹ãŒã‚ã£ãŸéŠ˜æŸ„ã¯PASSã—ã¦ã„ã‚‹ã‹ï¼Ÿ

| Ticker | Action | Entry | Stop | Target | Confidence | æ±ºå®šç†ç”± |
|--------|--------|-------|------|--------|------------|----------|

### 5. Meta-Analysis

- **ã‚ˆã‚Šä¿å®ˆçš„ã ã£ãŸAI**:
- **ã‚ˆã‚Šç©æ¥µçš„ã ã£ãŸAI**:
- **ç›¸é•éŠ˜æŸ„PASSæ•°**: X / Y (å…¨ç›¸é•éŠ˜æŸ„ãŒPASSã•ã‚ŒãŸã‹)

---

**Important:**
- âš ï¸ **æ„è¦‹ãŒåˆ†ã‹ã‚ŒãŸ = PASSï¼ˆDevil's AdvocateåŸå‰‡ï¼‰**
- ä¸¡è€…ãŒPROCEEDã§ä¸€è‡´ã—ãŸå ´åˆã®ã¿ã€PROCEEDã‚’æ¤œè¨
- æ±ºç®—æ—¥ãƒªã‚¹ã‚¯ï¼ˆâš ï¸ERR, ğŸ”´, ğŸŸ¡ï¼‰ãŒã‚ã‚‹éŠ˜æŸ„ã¯ç‰¹ã«æ…é‡ã«
- æ—¥æœ¬èªã§å‡ºåŠ›ã™ã‚‹ã“ã¨
`;

      // Copy to clipboard
      navigator.clipboard.writeText(prompt).then(() => {
        showToast(`âœ… ${typeName.toUpperCase()} CROSS-VAL COPIED`);
      }).catch(() => {
        // Fallback
        const textArea = document.createElement("textarea");
        textArea.value = prompt;
        textArea.style.position = "fixed";
        document.body.appendChild(textArea);
        textArea.focus();
        textArea.select();
        try {
          document.execCommand('copy');
          showToast(`âœ… ${typeName.toUpperCase()} CROSS-VAL COPIED`);
        } catch (e) {
          showToast("âŒ COPY FAILED");
        }
        document.body.removeChild(textArea);
      });
    }
  </script>
</body>
</html>